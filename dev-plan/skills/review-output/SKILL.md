---
name: review-output
description: Defines the standard output format and template for architectural review reports. Use this skill to ensure consistent, comprehensive review report formatting for development plans and implementation proposals.
---

# Architectural Review Report Format Specification

## Overview

This skill defines the exact structure and format for architectural review reports generated by the dev-plan-reviewer agent. The report must be comprehensive, actionable, and provide clear guidance for improving development plans.

## Target Audience

The review report is intended for:

- Developers who created the implementation plan
- Technical leads reviewing the architectural approach
- Team members who will implement the plan
- Project stakeholders assessing technical risk

## Report Structure

All architectural review reports MUST follow this exact structure:

````markdown
# Architectural Review Report

> **Development Plan**: [Link to or name of the plan being reviewed]
> **Review Date**: [YYYY-MM-DD]
> **Reviewer**: Development Plan Reviewer Agent

---

## Executive Summary

**Overall Assessment**: [Approved | Approved with Recommendations | Requires Revision | Rejected]

**Critical Issues**: [Number] Critical | [Number] High | [Number] Medium | [Number] Low

**Summary**: [2-3 sentence summary of the overall assessment and key findings]

**Recommendation**: [Clear, actionable recommendation on how to proceed]

---

## Architectural Analysis

### Issue #1: [Issue Title]

- **Category**: [Design Flaw | Inconsistency | Security | Performance | Maintainability | Scalability | Testing]
- **Severity**: [Critical | High | Medium | Low]
- **Location**: [Reference to specific section/component in the plan]

**Description**:
[Clear, detailed explanation of the identified issue]

**Impact**:
[Explanation of what could go wrong if this issue is not addressed, including potential risks and consequences]

**Existing Pattern Reference**:
[How similar problems are solved in the current project, with specific file paths and component examples when available. If no existing pattern exists, note this explicitly.]

**Recommendation**:
[Concrete, actionable solution or alternative approach that should be implemented]

**Code Example** (if applicable):
[Include code block showing both problematic and recommended approaches with comments]

---

[Repeat the above structure for each identified issue]

---

## Consistency Violations

[If no violations found, state: "No consistency violations identified."]

[List violations with references to project standards. Include: naming conventions, file structure, pattern violations, and style guide deviations]

---

## Positive Aspects

[Always include this section to highlight strengths. List 2-4 positive aspects.]

- [Well-thought-out aspect or decision]
- [Good use of existing patterns]
- [Innovative solution or clear structure]

---

## Recommendations Summary

### Critical Changes Required

[List must-fix issues that block implementation, or state "None identified."]

### High Priority Improvements

[List important improvements that should be addressed before implementation]

### Optional Enhancements

[List nice-to-have improvements that can be considered]

````

## Formatting Guidelines

### Tone and Language

- Be constructive and professional
- Always explain WHY something is problematic, not just WHAT is wrong
- Use clear, specific language avoiding vague critiques
- Balance criticism with recognition of positive aspects
- Frame recommendations as improvements, not just problems

### Severity Definitions

| Severity | When to Use | Action Required |
|----------|-------------|-----------------|
| **Critical** | System failures, security breaches, major architectural problems | Must fix before implementation |
| **High** | Maintainability problems, scalability concerns, significant technical debt | Should fix before implementation |
| **Medium** | Code quality improvements, consistency issues | Address but won't block implementation |
| **Low** | Minor improvements, optimization opportunities | Nice to have, can address during implementation |

### Code Examples and References

- Show both problematic and recommended approaches with comments
- Reference specific file paths: `path/to/file.ext:line_number`
- Use actual project code patterns in recommendations
- Reference specific functions, classes, or components by name

## Quality Requirements Checklist

When creating a review report, ensure:

- [ ] Clear overall assessment with accurate issue counts
- [ ] Each issue has category, severity, description, impact, and recommendation
- [ ] Existing patterns referenced with specific file paths
- [ ] Code examples show both problematic and recommended approaches
- [ ] Consistency violations documented with project references
- [ ] At least 2-3 positive aspects highlighted
- [ ] Recommendations properly prioritized by severity
- [ ] Professional, constructive tone throughout
- [ ] Proper markdown formatting

## Example Review Report

````markdown
# Architectural Review Report

> **Development Plan**: User Authentication System Implementation
> **Review Date**: 2025-10-30
> **Reviewer**: Development Plan Reviewer Agent

---

## Executive Summary

**Overall Assessment**: Approved with Recommendations

**Critical Issues**: 0 Critical | 1 High | 0 Medium | 0 Low

**Summary**: The authentication plan demonstrates solid security principles and follows many project patterns. However, the session storage approach contradicts project security standards and should be addressed.

**Recommendation**: Change session storage from localStorage to httpOnly cookies before implementation. Address consistency violations during development.

---

## Architectural Analysis

### Issue #1: Session Storage Implementation

- **Category**: Security
- **Severity**: High
- **Location**: Phase 2 - Session Management Implementation

**Description**:
The plan proposes storing session tokens in localStorage, which exposes them to XSS attacks. This contradicts the project's security standards for sensitive data storage.

**Impact**:
If session tokens are stored in localStorage, any XSS vulnerability in the application could allow attackers to steal user sessions, leading to account takeover attacks. This represents a significant security risk.

**Existing Pattern Reference**:
The project uses httpOnly cookies for session management in the existing admin authentication system (see `src/auth/AdminAuthService.ts:45-67`). This approach prevents JavaScript access to tokens, mitigating XSS risks.

**Recommendation**:
Follow the existing pattern and store session tokens in httpOnly cookies rather than localStorage. Update the authentication service to set cookies on the server side with appropriate security flags (httpOnly, secure, sameSite).

**Code Example**:
```typescript
// Current proposed approach (problematic)
localStorage.setItem('authToken', token);

// Recommended approach (following project pattern)
// Server-side (Node.js/Express)
res.cookie('authToken', token, {
  httpOnly: true,
  secure: process.env.NODE_ENV === 'production',
  sameSite: 'strict',
  maxAge: 24 * 60 * 60 * 1000 // 24 hours
});
```

---

## Consistency Violations

- File structure: Authentication files should be in `src/auth/` not `src/services/auth/` (see existing AdminAuthService, UserAuthService)
- Naming: Use `*Service` pattern instead of `AuthenticationManager` (e.g., `UserAuthenticationService`)

---

## Positive Aspects

- Comprehensive consideration of password hashing using bcrypt, following security best practices
- Good separation of concerns between authentication logic and API endpoints
- Clear phase breakdown making implementation manageable
- Thorough API endpoint design with proper HTTP methods and status codes

---

## Recommendations Summary

### Critical Changes Required

None identified.

### High Priority Improvements

1. Change session storage from localStorage to httpOnly cookies following the pattern in `src/auth/AdminAuthService.ts`

### Optional Enhancements

1. Move authentication files to `src/auth/` directory to match project structure
2. Rename `AuthenticationManager` to `UserAuthenticationService` for naming consistency
3. Consider adding rate limiting for login attempts to prevent brute force attacks

````

## Usage Notes

- Always use this exact structure for consistency across reviews
- Adapt the depth of analysis to the complexity of the plan being reviewed
- Reference actual project files and patterns whenever possible
- Be thorough but maintain a constructive, helpful tone
- Ensure every issue has a concrete recommendation
- Balance criticism with recognition of strengths
